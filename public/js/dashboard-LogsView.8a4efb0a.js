"use strict";(self["webpackChunkclient_management"]=self["webpackChunkclient_management"]||[]).push([[930],{3814:function(t,e,s){s.d(e,{Z:function(){return x}});var i=function(){var t=this,e=t._self._c;return e("div",{staticClass:"activity d-flex align-items-center",attrs:{id:t._id,role:"button"},on:{click:t.showField}},[e("b-avatar",{style:{backgroundColor:t.icon.bgColor,color:t.icon.color||"#fff"},attrs:{size:"2.5rem"}},[t.activity.action?[e(t.icon.component,t._b({tag:"component"},"component",t.icon.props,!1))]:t._e()],2),e("div",{staticClass:"activity-content ml-2"},[t._v(" "+t._s(t.title)+" "),t.$isAdmin?e("span",{staticClass:"font-weight-bold"},[t._v(t._s(t.by))]):t._e()]),e("div",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip"}],staticClass:"text-gray ml-auto fs-sm",attrs:{role:"button",title:t.tooltipDate}},[t._v(t._s(t.date))]),e("b-popover",{attrs:{target:t._id,triggers:["hover"],placement:"top","custom-class":"d-none d-md-block"},on:{show:t.popoverShown}},[t.isLoading||!t.isFieldLoaded?e("b-spinner",{staticClass:"mx-1",attrs:{small:"",variant:"primary"}}):t._e(),t.isFieldLoaded?[t.isClient?e("ClientActivity",{attrs:{client:t.field}}):e("UserActivity",{attrs:{user:t.field}})]:t._e()],2),e("b-modal",{attrs:{id:t._id,"hide-footer":"",centered:"","modal-class":"modal_full"},scopedSlots:t._u([{key:"modal-header",fn:function({close:s}){return[e("div",{staticClass:"d-flex align-items-center justify-content-between w-100"},[e("div",{staticClass:"d-flex align-items-center"},[e("b-avatar",{style:{backgroundColor:t.icon.bgColor,color:t.icon.color||"#fff",transform:"scale(0.75)"},attrs:{size:"2.5rem"}},[t.activity.action?[e(t.icon.component,t._b({tag:"component"},"component",t.icon.props,!1))]:t._e()],2),e("span",{staticClass:"mb-0 font-sm font-weight-bold ml-2"},[t._t("title",(function(){return[t._v(" "+t._s(t.title)+" ")]}))],2)],1),t._t("btn-close",(function(){return[e("b-button",{attrs:{size:"sm",variant:"outline-primary"},on:{click:s}},[t._v(" Close ")])]}),null,{close:s})],2)]}}],null,!0)},[t.isLoading||!t.isFieldLoaded?e("b-spinner",{staticClass:"mx-1",attrs:{small:"",variant:"primary"}}):t._e(),t.isFieldLoaded?[t.isClient?e("ClientActivity",{attrs:{client:t.field}}):e("UserActivity",{attrs:{user:t.field}})]:t._e()],2)],1)},a=[],n=s(5130),r=s(8752),o=function(){var t=this,e=t._self._c;return t.client?e("b-table-simple",{staticClass:"text-nowrap",attrs:{responsive:"",striped:"","table-class":"activity_table"}},[e("b-tbody",[e("b-tr",[e("b-td",[t._v("Full name")]),e("b-td",[t._v(t._s(t.client.full_name))])],1),e("b-tr",[e("b-td",[t._v("Email")]),e("b-td",[e("a",{attrs:{href:`mailto:${t.client.email}`,target:"_blank"}},[t._v(t._s(t.client.email))])])],1),e("b-tr",[e("b-td",[t._v("Hardware ID")]),e("b-td",[t._v(t._s(t.client.hwID))])],1),e("b-tr",[e("b-td",[t._v("Max threads")]),e("b-td",[t._v(t._s(t.client.max_threads))])],1),e("b-tr",[e("b-td",[t._v("Max session")]),e("b-td",[t._v(t._s(t.client.max_session))])],1),e("b-tr",[e("b-td",[t._v("Panel username")]),e("b-td",[t._v(t._s(t.client.panel_username))])],1),e("b-tr",[e("b-td",[t._v("Panel password")]),e("b-td",[t._v(t._s(t.client.panel_password))])],1),e("b-tr",[e("b-td",[t._v("Panel server ip")]),e("b-td",[t._v(t._s(t.client.panel_server_ip))])],1),e("b-tr",[e("b-td",[t._v("User group")]),e("b-td",[t._v(t._s(t.client.user_group))])],1),e("b-tr",[e("b-td",[t._v("Number of random to check")]),e("b-td",[t._v(t._s(t.client.number_of_random_to_check))])],1),e("b-tr",[e("b-td",[t._v("Created at")]),e("b-td",[t._v(t._s(t.$timeAgo.format(new Date(t.client.created_at))))])],1)],1)],1):t._e()},l=[],c={props:{client:{type:Object}}},d=c,u=s(1001),p=(0,u.Z)(d,o,l,!1,null,null,null),b=p.exports,_=function(){var t=this,e=t._self._c;return t.user?e("b-table-simple",{staticClass:"text-nowrap",attrs:{responsive:"",striped:"","table-class":"activity_table"}},[e("b-tbody",[e("b-tr",[e("b-td",[t._v("Full name")]),e("b-td",[t._v(t._s(t.user.first_name)+" "+t._s(t.user.last_name))])],1),e("b-tr",[e("b-td",[t._v("Username")]),e("b-td",[t._v(t._s(t.user.username))])],1),e("b-tr",[e("b-td",[t._v("Email")]),e("b-td",[e("a",{attrs:{href:`mailto:${t.user.email}`,target:"_blank"}},[t._v(t._s(t.user.email))])])],1),e("b-tr",[e("b-td",[t._v("Created at")]),e("b-td",[t._v(t._s(t.$timeAgo.format(new Date(t.user.created_at))))])],1)],1)],1):t._e()},m=[],h={props:{user:{type:Object}}},f=h,v=(0,u.Z)(f,_,m,!1,null,null,null),g=v.exports,y={props:{activity:{type:Object,required:!0}},components:{BAvatar:n.SH,BIconPlus:r.s3j,BIconPencilFill:r.Ybx,BIconTrash:r.DkS,BIconCheck2:r._$q,BIconX:r.uR$,ClientActivity:b,UserActivity:g},data(){return{actions:{create:{component:r.s3j,bgColor:"#0fbcf9",props:{scale:2}},update:{component:r.Ybx,bgColor:"#04b161",props:{}},delete:{component:r.DkS,bgColor:"#f53b57",props:{scale:1.3}},activate:{component:r._$q,bgColor:"#2980b9",props:{scale:1.5}},deactivate:{component:r.uR$,bgColor:"#ffd32a",color:"#333",props:{scale:1.7}}},isLoading:!0}},computed:{_id(){return"activity_"+this._uid},icon(){return this.actions[this.activity.action]||{}},title(){let{model:t,action:e}=this.activity;return t=t&&t.charAt(0).toUpperCase()+t.slice(1),this.$isAdmin?`${t} has been ${e}d by`:`${t} has been ${e}d`},by(){let t=this.activity.created_by,e=this.$me.id==t?.id?"me":`${t.first_name}  ${t.last_name}`;return e},date(){return this.$timeAgo.format(new Date(this.activity.created_at))},tooltipDate(){return new Date(this.activity.created_at).toLocaleString()},isClient(){return"client"==this.activity.model},isFieldLoaded(){return"object"===typeof this.field&&Object.keys(this.field).length>0},field(){return this.activity.field_id}},methods:{popoverShown(){this.isFieldLoaded||this.getField()},async getField(){this.isLoading=!0;try{await this.$store.dispatch("getLogField",this.activity)}catch(t){console.log(t)}finally{this.isLoading=!1}},async showField(){window.innerWidth<=576&&(this.$bvModal.show(this._id),this.getField())}}},w=y,C=(0,u.Z)(w,i,a,!1,null,null,null),x=C.exports},1443:function(t,e,s){s.d(e,{Z:function(){return c}});var i=function(){var t=this,e=t._self._c;return e("div",{staticClass:"d-flex align-items-center justify-content-end"},[e("div",{staticClass:"mx-2 fs-sm"},[t._v(t._s(t.paginateFrom)+"-"+t._s(t.paginateTo)+" of "+t._s(t.total))]),e("b-pagination",{staticClass:"custom_pagination p-0",attrs:{"hide-goto-end-buttons":"","total-rows":t.total,"per-page":t.perPage},scopedSlots:t._u([{key:"prev-text",fn:function(){return[t._v(" < ")]},proxy:!0},{key:"next-text",fn:function(){return[t._v(" > ")]},proxy:!0}]),model:{value:t._value,callback:function(e){t._value=e},expression:"_value"}})],1)},a=[],n={props:{value:{type:Number,default:1},total:{type:Number,default:1},perPage:{type:Number,default:1}},computed:{_value:{get(){return this.value},set(t){this.$emit("input",t)}},paginateTo(){let t=this.value*this.perPage;return t>this.total&&(t=this.total),t},paginateFrom(){return(this.value-1)*this.perPage+1}}},r=n,o=s(1001),l=(0,o.Z)(r,i,a,!1,null,null,null),c=l.exports},4749:function(t,e,s){s.d(e,{Z:function(){return u}});var i=function(){var t=this,e=t._self._c;return e("div",{staticClass:"dropdown_select_wrapper",class:{active:t.isFoucsed||t.isShown,required:t.required,is_invalid:!!t.errorMsg,bordered:t.bordered}},[e("div",{staticClass:"dropdown_select_control"},[t.label?e("div",{staticClass:"dropdown_select_label"},[t._v(t._s(t.label))]):t._e(),e("b-dropdown",{ref:"dropdown",staticClass:"dropdown_select",attrs:{block:"","toggle-class":"dropdown_select_btn d-flex justify-content-between align-items-center","menu-class":"w-100 p-0 shadow-lg border-0",variant:"text"},on:{shown:t.shown,hidden:t.hidden},scopedSlots:t._u([{key:"button-content",fn:function(){return[t._t("label",(function(){return[t.selectedOption?e("span",[t._v(t._s(t.selectedOption[t.fieldText]))]):t._e()]}))]},proxy:!0}],null,!0)},t._l(t.options,(function(s,i){return e("b-dropdown-item",{key:i,attrs:{disabled:s.disabled,"link-class":"px-3 py-2 "+(t.value==s[t.fieldValue]?"bg-light text-dark":"")},on:{click:function(e){return t.select(s)}}},[t._v(" "+t._s(s[t.fieldText])+" ")])})),1),t.errorMsg?e("div",{staticClass:"custom_input_error"},[t._v(t._s(t.errorMsg))]):t._e()],1)])},a=[],n=s(5327),r=s(1638),o={props:{label:{type:String},value:{type:[String,Number]},required:{type:Boolean,default:!1},options:{type:Array,default:()=>[]},errorMsg:{type:String,default:""},bordered:{type:Boolean,default:!1},fieldValue:{type:[String,Number],default:"id"},fieldText:{type:[String,Number],default:"name"}},components:{BDropdown:n.R,BDropdownItem:r.E},data(){return{isFoucsed:!1,isShown:!1}},mounted(){let t=this.$refs.dropdown?.$refs?.toggle;t&&(t.addEventListener("focus",(()=>{this.isFoucsed=!0})),t.addEventListener("blur",(()=>{this.isFoucsed=!1})))},computed:{val:{get(){return this.value},set(t){this.$emit("input",t)}},selectedOption(){return this.options.find((t=>t[this.fieldValue]==this.value))}},methods:{shown(){this.isShown=!0},hidden(){this.isShown=!1},select(t){this.val=t[this.fieldValue],this.$emit("change",t[this.fieldValue]),this.$emit("item-selected",t)}}},l=o,c=s(1001),d=(0,c.Z)(l,i,a,!1,null,null,null),u=d.exports},436:function(t,e,s){s.d(e,{Z:function(){return h}});var i=function(){var t=this,e=t._self._c;return e("div",{staticClass:"dashboard_content"},[e("base-container",{staticClass:"pt-4"},[e("b-breadcrumb",{staticClass:"bg-white border rounded shadow-sm font-weight-600 mb-4"},[e("b-breadcrumb-item",{staticClass:"d-flex align-items-center",attrs:{to:{name:"dashboard"},active:!t._breads.length}},[e("IconDashboard",{staticClass:"mr-1",staticStyle:{width:"22px"}}),t._v(" Dashboard ")],1),t._l(t._breads,(function(s,i){return e("b-breadcrumb-item",{key:i,attrs:{active:i==t._breads.length-1}},[s.component?e(s.icon,{tag:"component",class:s.class||"",style:s.style||""}):t._e(),t._v(" "+t._s(t._f("capitalize")(s.title))+" ")],1)}))],2),t.noWrap?t._t("default"):e("div",{staticClass:"bg-white px-3 py-4 rounded shadow-sm"},[t._t("default")],2)],2)],1)},a=[],n=function(){var t=this,e=t._self._c;return e("div",{staticClass:"base_container"},[t._t("default")],2)},r=[],o={},l=o,c=s(1001),d=(0,c.Z)(l,n,r,!1,null,"4dea56fd",null),u=d.exports,p=s(5301),b={components:{BaseContainer:u,IconDashboard:p.Z},props:{breads:{type:Array,default:()=>[]},noWrap:{type:Boolean,default:!1}},computed:{_breads(){if(this.breads.length>0)return this.breads;let t=this.$route.name;if("dashboard"==t)return[];let e=t.split(".");return e.length<=1?[]:[{title:e[1]}]}}},_=b,m=(0,c.Z)(_,i,a,!1,null,null,null),h=m.exports},1654:function(t,e,s){s.r(e),s.d(e,{default:function(){return b}});var i=function(){var t=this,e=t._self._c;return e("dashboard-content",[e("div",{staticClass:"d-flex align-items-center justify-content-xl-center flex-wrap w-100 mb-3"},[t.$isAdmin?e("BaseDropdownSelect",{staticClass:"mb-3 mr-3",attrs:{options:t.$store.getters.userOptions,label:"Created By",bordered:""},model:{value:t.filters.by,callback:function(e){t.$set(t.filters,"by",e)},expression:"filters.by"}}):t._e(),e("BaseDropdownSelect",{staticClass:"mr-3 mb-3",attrs:{options:t.$store.getters.clientOptions,label:"Client",bordered:""},model:{value:t.filters.client,callback:function(e){t.$set(t.filters,"client",e)},expression:"filters.client"}}),e("BaseDropdownSelect",{staticClass:"mr-3 mb-3",attrs:{options:t.actionOptions,label:"Action",bordered:""},model:{value:t.filters.action,callback:function(e){t.$set(t.filters,"action",e)},expression:"filters.action"}})],1),e("b-row",{staticClass:"mx-auto",staticStyle:{"max-width":"800px"}},[e("b-col",{staticClass:"border px-0",attrs:{cols:"12"}},[t._l(t.logs,(function(t,s){return e("Activity",{key:s,staticClass:"border-bottom py-2 px-3",attrs:{activity:t}})})),e("BasePagination",{attrs:{total:t.$store.state.dashboard.logs.count,perPage:t.perPage},model:{value:t.page,callback:function(e){t.page=e},expression:"page"}})],2)],1)],1)},a=[],n=s(436),r=s(1443),o=s(4749),l=s(3814),c={name:"LogsView",components:{DashboardContent:n.Z,BaseDropdownSelect:o.Z,BasePagination:r.Z,Activity:l.Z},data(){return{filters:{by:"",action:"",client:""},perPage:10,page:1,actionOptions:[{name:"Any Action",id:""},{name:"Create",id:"create"},{name:"Update",id:"update"},{name:"Delete",id:"delete"},{name:"Activate",id:"activate"},{name:"Deactivate",id:"deactivate"}]}},mounted(){this.getLogs(),this.$store.dispatch("getClients","?type=options").then((t=>this.$store.commit("SET_CLIENT_OPTIONS",t))),this.$isAdmin&&this.$store.dispatch("getUsers","?type=options").then((t=>this.$store.commit("SET_USER_OPTIONS",t)))},watch:{filters:{handler(){this.page=1,this.getLogs()},deep:!0},page(){this.getLogs()}},computed:{logs(){return this.$store.state.dashboard.logs.results}},methods:{getLogs(){this.isLoading=!0;let t=`?per_page=${this.perPage}&page=${this.page}&action=${this.filters.action}&by=${this.filters.by}&client=${this.filters.client}`;return this.$store.dispatch("getLogs",t).finally((()=>this.isLoading=!1))}}},d=c,u=s(1001),p=(0,u.Z)(d,i,a,!1,null,null,null),b=p.exports}}]);